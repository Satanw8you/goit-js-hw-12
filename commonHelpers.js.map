{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.image-list');\nconst span = document.querySelector('.loader');\n\nspan.style.display = 'none';\nform.addEventListener('submit', handleSearchOnForm);\n\nfunction handleSearchOnForm(event) {\n  event.preventDefault();\n  list.innerHTML = '';\n  span.style.display = 'block';\n  const inputValue = event.target.elements.input.value;\n  fetchImages(inputValue)\n    .then(data => {\n      span.style.display = 'none';\n      if (!data.hits.length) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      list.innerHTML = ('beforeend', createMarkup(data.hits));\n      const refreshPage = new SimpleLightbox('.image-list a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refreshPage.refresh();\n      form.reset();\n    })\n    .catch(error => {\n      span.style.display = 'none';\n      console.log(error);\n    });\n}\n\nfunction fetchImages(name) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '41847717-e04c221e42f4fa0d8db3b7e62';\n  const inputName = name;\n  const SEARCH_PARAMS = new URLSearchParams({\n    key: API_KEY,\n    q: inputName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  return fetch(`${BASE_URL}?${SEARCH_PARAMS}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfunction createMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"image-list-item\">\n          <a href=\"${largeImageURL}\" class=\"list-image-link\">\n            <img class=\"list-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <div class=\"image-wrapper\">\n            <ul class=\"desc-list\">\n              <li class=\"desk-item\">\n                <h2 class=\"desk-title\">Likes</h2>\n                <p class=\"desk-text\">${likes}</p>\n              </li>\n              <li class=\"desk-item\">\n                <h2 class=\"desk-title\">Views</h2>\n                <p class=\"desk-text\">${views}</p>\n              </li>\n              <li class=\"desk-item\">\n                <h2 class=\"desk-title\">Comments</h2>\n                <p class=\"desk-text\">${comments}</p>\n              </li>\n              <li class=\"desk-item\">\n                <h2 class=\"desk-title\">Downloads</h2>\n                <p class=\"desk-text\">${downloads}</p>\n              </li>\n            </ul>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n"],"names":["form","list","span","handleSearchOnForm","event","inputValue","fetchImages","data","iziToast","createMarkup","SimpleLightbox","error","name","BASE_URL","API_KEY","inputName","SEARCH_PARAMS","response","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAO,SAAS,cAAc,SAAS,EAE7CA,EAAK,MAAM,QAAU,OACrBF,EAAK,iBAAiB,SAAUG,CAAkB,EAElD,SAASA,EAAmBC,EAAO,CACjCA,EAAM,eAAc,EACpBH,EAAK,UAAY,GACjBC,EAAK,MAAM,QAAU,QACrB,MAAMG,EAAaD,EAAM,OAAO,SAAS,MAAM,MAC/CE,EAAYD,CAAU,EACnB,KAAKE,GAAQ,CACZL,EAAK,MAAM,QAAU,OAChBK,EAAK,KAAK,QACbC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAEHP,EAAK,UAA0BQ,EAAaF,EAAK,IAAI,EACjC,IAAIG,EAAe,gBAAiB,CACtD,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAO,EACW,QAAO,EACnBV,EAAK,MAAK,CAChB,CAAK,EACA,MAAMW,GAAS,CACdT,EAAK,MAAM,QAAU,OACrB,QAAQ,IAAIS,CAAK,CACvB,CAAK,CACL,CAEA,SAASL,EAAYM,EAAM,CACzB,MAAMC,EAAW,2BACXC,EAAU,qCACVC,EAAYH,EACZI,EAAgB,IAAI,gBAAgB,CACxC,IAAKF,EACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EACD,OAAO,MAAM,GAAGF,KAAYG,GAAe,EAAE,KAAKC,GAAY,CAC5D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASR,EAAaS,EAAO,CAC3B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,qBACSL;AAAA,2CACsBD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAM1BC;AAAA;AAAA;AAAA;AAAA,uCAIAC;AAAA;AAAA;AAAA;AAAA,uCAIAC;AAAA;AAAA;AAAA;AAAA,uCAIAC;AAAA;AAAA;AAAA;AAAA,cAKlC,EACA,KAAK,EAAE,CACZ"}